<html>
<head>
<title>Testing SES/5</title>
</head>
<body>
<div id="show">testing...</div>
<script src="whitelist.js"></script>
<script src="atLeastFreeVarNames.js"></script>
<script src="WeakMap.js"></script>
<script src="initSES.js"></script>
<script>
  (function(){
    var show = document.getElementById("show");
    if (!('getOwnPropertyNames' in Object)) {
      alert('Please upgrade to a browser implementing ' +
            'Object.getOwnPropertyNames.');
      show.appendChild(document.createTextNode('cancelled'));
      return;
    } else if (navigator.userAgent.indexOf('Chrome') >= 0) {
      alert('If this crashes your page, turn debugging on and try again');
    } else if (!('console' in window) || typeof console.log !== 'function') {
      alert('No console.\n' +
            'If this crashes your page, turn debugging on and try again');
    }
    initSES(window, whitelist, atLeastFreeVarNames, WeakMap);

    var output = eval2('3+4') * cajaVM.compile('window')({window: 6});
    var textNode = document.createTextNode(output);
    show.appendChild(textNode);
  })();
</script>
</body>
</html>
